#

# 配置文件解析

当以命令行运行`vite`时，Vite会自动解析`项目根目录`下名为`vite.config.js`的文件

最基础的配置文件
```js
// vite.config.js
export default {
  // 配置选项
}
```
注意：即使项目没有在 package.json 中开启 type: "module"，Vite 也支持在配置文件中使用 ESM 语法。这种情况下，配置文件会在被加载前自动进行预处理。

你可以显式地通过 --config 命令行选项指定一个配置文件（相对于 cwd 路径进行解析）
```js
vite --config my-config.js
```
# 配置智能提示
因为Vite本身附带TypeScript类型，所以可以通过IDE和jsdoc的配合来实现智能提示：
```js
/**
 * @type {import('vite').UserConfig}
 */
	const config = {
	  // ...
	}

export default config
```
另外可以使用`defineConfig`工具函数，这样不用jsdoc注解也可以获取类型提示：
```js
important { defineConfig } from 'vue'
export default defineConfig {
	//.....
}
```
Vite 也直接支持 TS 配置文件。你可以在 vite.config.ts 中使用 defineConfig 工具函数。

# 情景配置
如果配置文件需要基于(`serve`和`build`)命令或者不同的模式来决定选项，则可以选择导出这样一个函数：
```js
export default ({ command, mode }) => {
	if(commanh == 'serve') } {
		return {
			//serve独有
		}
	}else {
		return {
			//build 独有配置
		}
	}
}
```

# 异步配置
如果异步配置需要调用一个异步函数，也可以转而导出一个异步函数：
```js
export default async ({ commone,mode }) => {
	const data = await asyncFunction()
	return {
		//构建模式所需的特有配置
	}
}
```



